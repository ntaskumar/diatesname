(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e,t,a){},17:function(e,t,a){e.exports=a(40)},40:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(13),s=a.n(r),o=a(15),l=a(2);const i={photoList:[],filteredPhotos:[],searchInput:""};var m=Object(l.a)({photoList:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.photoList,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PHOTO_LIST":return t.payload;default:return e}},filteredPhotos:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.filteredPhotos,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_FILTERED_PHOTOS":return t.payload;default:return e}},searchInput:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.searchInput,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SEARCH_INPUT":return t.payload;default:return e}}});var u=Object(l.b)(m),d=a(14),h=a.n(d);a(12);var p=()=>{const[e,t]=Object(n.useState)(""),[a,r]=Object(n.useState)([]),[s,o]=Object(n.useState)([]),[l,i]=Object(n.useState)(0),[m,u]=Object(n.useState)(!1);Object(n.useEffect)(()=>{h.a.get("https://test.create.diagnal.com/data/page1.json").then(e=>{const t=e.data.page["content-items"].content.map(e=>({id:e.name,download_url:"https://test.create.diagnal.com/images/".concat(e["poster-image"]),author:e.name}));r(t),o(t)}).catch(e=>console.log(e))},[]),Object(n.useEffect)(()=>{const t=setTimeout(()=>{p(e)},300);return()=>clearTimeout(t)},[e]);const d=Object(n.useRef)(null);Object(n.useEffect)(()=>{const e=new IntersectionObserver(e=>{e[0].isIntersecting&&g()},{threshold:1});return d.current&&e.observe(d.current),()=>{d.current&&e.unobserve(d.current)}},[l]);const p=e=>{const t=a.filter(t=>t.author.toLowerCase().includes(e.toLowerCase()));o(t)},g=()=>{setTimeout(()=>{i(l+10)},1e3)},E=()=>{const t=""!==e.trim()?s:a;return 0===t.length&&""!==e.trim()?c.a.createElement("div",{className:"no-data-found"},c.a.createElement("p",null,"No records found")):t.slice(0,l>0?l:t.length).map((e,t)=>c.a.createElement("div",{className:"column",key:"".concat(e.id,"-").concat(t)},c.a.createElement("img",{src:e.download_url,alt:"random"}),c.a.createElement("span",{className:"author"},e.author)))},v=e=>{e.target.closest(".right-align")||u(!1)};Object(n.useEffect)(()=>(document.addEventListener("click",v),()=>{document.removeEventListener("click",v)}),[]);return c.a.createElement("div",{className:"App"},c.a.createElement("div",{className:"fixed-elements"},c.a.createElement("div",{className:"left-align"},c.a.createElement("div",{className:"back-image"},c.a.createElement("img",{src:"https://test.create.diagnal.com/images/Back.png",alt:"back",onClick:()=>{t(""),o(a),u(!1)},style:{cursor:"pointer"}})),c.a.createElement("header",{className:"header"},c.a.createElement("h2",null,"Romantic Comedy"))),c.a.createElement("div",{className:"right-align"},c.a.createElement("div",{className:"back-image"},c.a.createElement("img",{src:"https://test.create.diagnal.com/images/search.png",alt:"search",onClick:()=>{u(e=>!e)},style:{cursor:"pointer"}})),m&&c.a.createElement("div",{className:"search-container"},c.a.createElement("input",{type:"text",value:e,onChange:e=>{const a=e.target.value;t(a),p(a)},placeholder:"Search by author...",className:"search-input"})))),c.a.createElement("div",{className:"photo-grid"},(s.length,E()),c.a.createElement("div",{ref:d})))};s.a.render(c.a.createElement(o.a,{store:u},c.a.createElement(p,null)),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.e1db8423.chunk.js.map