{"version":3,"sources":["Redux/actions.js","Redux/reducers.js","Redux/store.js","App.js","index.js"],"names":["initialState","photoList","filteredPhotos","searchInput","rootReducer","combineReducers","state","arguments","length","undefined","action","type","payload","store","createStore","App","setSearchInput","useState","setPhotoList","setFilteredPhotos","loadedCount","setLoadedCount","showSearchInput","setShowSearchInput","useEffect","axios","get","then","res","images","data","page","content","map","item","id","name","download_url","concat","author","catch","error","console","log","timer","setTimeout","filterPhotos","clearTimeout","loaderRef","useRef","observer","IntersectionObserver","entries","isIntersecting","loadMoreImages","threshold","current","observe","unobserve","input","filtered","filter","el","toLowerCase","includes","renderPhotos","photosToRender","trim","React","createElement","className","slice","index","key","src","alt","handleClickOutside","e","target","closest","document","addEventListener","removeEventListener","onClick","handleBackClick","style","cursor","toggleSearchInput","prev","value","onChange","inputValue","placeholder","ref","ReactDOM","render","Provider","getElementById"],"mappings":"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","file":"static/js/main.e1db8423.chunk.js","sourcesContent":["export const SET_PHOTO_LIST = \"SET_PHOTO_LIST\";\r\nexport const SET_FILTERED_PHOTOS = \"SET_FILTERED_PHOTOS\";\r\nexport const SET_SEARCH_INPUT = \"SET_SEARCH_INPUT\";\r\n\r\nexport const setPhotoList = (photos) => ({\r\n  type: SET_PHOTO_LIST,\r\n  payload: photos,\r\n});\r\n\r\nexport const setFilteredPhotos = (photos) => ({\r\n  type: SET_FILTERED_PHOTOS,\r\n  payload: photos,\r\n});\r\n\r\nexport const setSearchInput = (input) => ({\r\n  type: SET_SEARCH_INPUT,\r\n  payload: input,\r\n});\r\n","import { combineReducers } from \"redux\";\r\nimport {\r\n  SET_PHOTO_LIST,\r\n  SET_FILTERED_PHOTOS,\r\n  SET_SEARCH_INPUT,\r\n} from \"./actions\";\r\n\r\nconst initialState = {\r\n  photoList: [],\r\n  filteredPhotos: [],\r\n  searchInput: \"\",\r\n};\r\n\r\nconst photoReducer = (state = initialState.photoList, action) => {\r\n  switch (action.type) {\r\n    case SET_PHOTO_LIST:\r\n      return action.payload;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nconst filteredPhotosReducer = (state = initialState.filteredPhotos, action) => {\r\n  switch (action.type) {\r\n    case SET_FILTERED_PHOTOS:\r\n      return action.payload;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nconst searchInputReducer = (state = initialState.searchInput, action) => {\r\n  switch (action.type) {\r\n    case SET_SEARCH_INPUT:\r\n      return action.payload;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nconst rootReducer = combineReducers({\r\n  photoList: photoReducer,\r\n  filteredPhotos: filteredPhotosReducer,\r\n  searchInput: searchInputReducer,\r\n});\r\n\r\nexport default rootReducer;\r\n","import { createStore } from \"redux\";\r\nimport rootReducer from \"./reducers\";\r\n\r\nconst store = createStore(rootReducer);\r\n\r\nexport default store;\r\n","import React, { useState, useEffect, useRef } from \"react\";\nimport axios from \"axios\";\nimport \"./styles.css\";\n\nconst App = () => {\n  const [searchInput, setSearchInput] = useState(\"\");\n  const [photoList, setPhotoList] = useState([]);\n  const [filteredPhotos, setFilteredPhotos] = useState([]);\n  const [loadedCount, setLoadedCount] = useState(0);\n  const [showSearchInput, setShowSearchInput] = useState(false);\n\n  useEffect(() => {\n    axios\n      .get(\"https://test.create.diagnal.com/data/page1.json\")\n      .then((res) => {\n        const contentItems = res.data.page[\"content-items\"].content;\n        const images = contentItems.map((item) => ({\n          id: item.name,\n          download_url: `https://test.create.diagnal.com/images/${item[\"poster-image\"]}`,\n          author: item.name,\n        }));\n        setPhotoList(images);\n        setFilteredPhotos(images);\n      })\n      .catch((error) => console.log(error));\n  }, []);\n\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      filterPhotos(searchInput);\n    }, 300);\n\n    return () => clearTimeout(timer);\n  }, [searchInput]);\n\n  const loaderRef = useRef(null);\n  useEffect(() => {\n    const observer = new IntersectionObserver(\n      (entries) => {\n        const target = entries[0];\n        if (target.isIntersecting) {\n          loadMoreImages();\n        }\n      },\n      { threshold: 1 }\n    );\n\n    if (loaderRef.current) {\n      observer.observe(loaderRef.current);\n    }\n\n    return () => {\n      if (loaderRef.current) {\n        observer.unobserve(loaderRef.current);\n      }\n    };\n  }, [loadedCount]);\n\n  const filterPhotos = (input) => {\n    const filtered = photoList.filter((el) =>\n      el.author.toLowerCase().includes(input.toLowerCase())\n    );\n    setFilteredPhotos(filtered);\n  };\n\n  const handleInputChange = (e) => {\n    const inputValue = e.target.value;\n    setSearchInput(inputValue);\n    filterPhotos(inputValue);\n  };\n\n  const loadMoreImages = () => {\n    setTimeout(() => {\n      setLoadedCount(loadedCount + 10);\n    }, 1000);\n  };\n\n  const renderPhotos = () => {\n    const photosToRender =\n      searchInput.trim() !== \"\" ? filteredPhotos : photoList;\n\n    if (photosToRender.length === 0 && searchInput.trim() !== \"\") {\n      return (\n        <div className=\"no-data-found\">\n          <p>No records found</p>\n        </div>\n      );\n    }\n\n    return photosToRender\n      .slice(0, loadedCount > 0 ? loadedCount : photosToRender.length)\n      .map((el, index) => (\n        <div className=\"column\" key={`${el.id}-${index}`}>\n          <img src={el.download_url} alt=\"random\" />\n          <span className=\"author\">{el.author}</span>\n        </div>\n      ));\n  };\n\n  const toggleSearchInput = () => {\n    setShowSearchInput((prev) => !prev);\n  };\n\n  const handleClickOutside = (e) => {\n    if (!e.target.closest(\".right-align\")) {\n      setShowSearchInput(false);  \n    }\n  };\n\n \n  useEffect(() => {\n    document.addEventListener(\"click\", handleClickOutside);\n    return () => {\n      document.removeEventListener(\"click\", handleClickOutside);\n    };\n  }, []);\n\n  const handleBackClick = () => {\n    setSearchInput(\"\");\n    setFilteredPhotos(photoList);\n    setShowSearchInput(false);\n  };\n\n  return (\n    <div className=\"App\">\n \n      <div className=\"fixed-elements\">\n        <div className=\"left-align\">\n          <div className=\"back-image\">\n            <img\n              src=\"https://test.create.diagnal.com/images/Back.png\"\n              alt=\"back\"\n              onClick={handleBackClick}  \n              style={{ cursor: \"pointer\" }}\n            />\n          </div>\n          <header className=\"header\">\n            <h2>Romantic Comedy</h2>\n          </header>\n        </div>\n        <div className=\"right-align\">\n          <div className=\"back-image\">\n            <img\n              src=\"https://test.create.diagnal.com/images/search.png\"\n              alt=\"search\"\n              onClick={toggleSearchInput}  \n              style={{ cursor: \"pointer\" }}\n            />\n          </div>\n          {showSearchInput && (\n            <div className=\"search-container\">\n              <input\n                type=\"text\"\n                value={searchInput}\n                onChange={handleInputChange}\n                placeholder=\"Search by author...\"\n                className=\"search-input\"\n              />\n            </div>\n          )}\n        </div>\n      </div>\n\n      <div className=\"photo-grid\">\n        {filteredPhotos.length > 0\n          ? renderPhotos(filteredPhotos)\n          : renderPhotos(photoList)}\n        <div ref={loaderRef}></div>\n      </div>\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Provider } from \"react-redux\";\nimport store from \"./Redux/store\";\nimport App from \"./App\";\nimport \"./styles.css\";\n \n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}